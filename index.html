<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Click a Jude - Advanced Clicker</title>
<style>
  /* Basic resets and styling */
  body {
    margin: 0; padding: 0; background: #121212; color: white;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    text-align: center;
    user-select: none;
    overflow-x: hidden;
  }
  h1 {
    margin-top: 20px;
    font-size: 3rem;
    background: linear-gradient(270deg, red, orange, yellow, green, cyan, blue, violet, red);
    background-size: 1500% 1500%;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    animation: rainbow 5s ease infinite;
  }
  @keyframes rainbow {
    0% {background-position: 0% 50%;}
    50% {background-position: 100% 50%;}
    100% {background-position: 0% 50%;}
  }
  #click-image {
    margin: 20px auto;
    width: 150px;
    height: 150px;
    cursor: pointer;
    user-select: none;
    transition: transform 0.15s ease;
  }
  #click-image:active {
    transform: scale(0.9);
  }
  #money-display {
    font-size: 2rem;
    margin: 10px 0;
  }
  #mpc-display, #auto-clickers-display, #ascension-points-display {
    margin: 5px 0;
    font-weight: bold;
  }
  .upgrades-container, .ascension-container {
    max-width: 600px;
    margin: 20px auto;
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 12px;
  }
  .upgrade {
    background: #222;
    border-radius: 8px;
    border: 2px solid #444;
    width: 180px;
    padding: 12px;
    box-sizing: border-box;
    cursor: pointer;
    position: relative;
    color: #ccc;
    transition: box-shadow 0.3s ease, color 0.3s ease;
  }
  .upgrade.affordable {
    box-shadow: 0 0 12px 3px #00ffcc;
    color: #00ffcc;
  }
  .upgrade:hover {
    border-color: #00ffcc;
  }
  .upgrade .name {
    font-weight: 700;
    font-size: 1.1rem;
    margin-bottom: 6px;
  }
  .upgrade .desc {
    font-size: 0.85rem;
    margin-bottom: 8px;
    min-height: 36px;
  }
  .upgrade .cost {
    font-weight: 700;
    font-size: 1rem;
  }
  #ascension-button {
    margin-top: 20px;
    padding: 12px 24px;
    font-size: 1.2rem;
    cursor: pointer;
    background: #007acc;
    border: none;
    border-radius: 8px;
    color: white;
    box-shadow: 0 0 8px #007accaa;
    transition: background 0.3s ease;
  }
  #ascension-button:disabled {
    background: #555;
    cursor: default;
    box-shadow: none;
  }
  #ascension-coins-display {
    margin-top: 10px;
    font-weight: bold;
    font-size: 1.3rem;
    color: #0ff;
    text-shadow: 0 0 5px #0ff;
  }
  #ascension-menu {
    position: fixed;
    top: 10%;
    left: 50%;
    transform: translateX(-50%);
    background: #101010ee;
    border-radius: 16px;
    padding: 20px;
    width: 90%;
    max-width: 450px;
    box-shadow: 0 0 20px #00ffccaa;
    display: none;
    flex-direction: column;
    z-index: 1000;
  }
  #ascension-menu.visible {
    display: flex;
  }
  #ascension-menu h2 {
    margin: 0 0 15px 0;
    color: #00ffcc;
  }
  .ascension-upgrade {
    background: #222;
    border-radius: 8px;
    border: 2px solid #004d40;
    margin-bottom: 12px;
    padding: 10px;
    cursor: pointer;
    color: #666;
    transition: border-color 0.3s ease, color 0.3s ease;
  }
  .ascension-upgrade.affordable {
    border-color: #00ffcc;
    color: #00ffcc;
  }
  .ascension-upgrade:hover {
    border-color: #00ffcc;
  }
  .ascension-upgrade .name {
    font-weight: 700;
    font-size: 1rem;
  }
  .ascension-upgrade .desc {
    font-size: 0.85rem;
  }
  #ascension-close {
    margin-top: 10px;
    align-self: flex-end;
    background: #007acc;
    border: none;
    padding: 6px 12px;
    border-radius: 6px;
    color: white;
    cursor: pointer;
    box-shadow: 0 0 5px #007accaa;
  }
  #ascension-close:hover {
    background: #005fa3;
  }
  /* Floating click effect */
  .float-text {
    position: absolute;
    font-weight: 900;
    color: #0ff;
    text-shadow: 0 0 8px #0ff;
    user-select: none;
    pointer-events: none;
    animation: floatUp 1s forwards ease-out;
  }
  @keyframes floatUp {
    0% {opacity: 1; transform: translateY(0);}
    100% {opacity: 0; transform: translateY(-50px);}
  }
</style>
</head>
<body>

<h1>Click a Jude</h1>
<img id="click-image" src="IMG_7281.jpeg" alt="Click a Jude" draggable="false" />

<div id="money-display">Money: $0</div>
<div id="mpc-display">Money per click: 1</div>
<div id="auto-clickers-display">Auto Clickers: 0</div>
<div id="ascension-points-display">Ascension Coins: 0</div>

<div class="upgrades-container" id="upgrades-container">
  <!-- Upgrades inserted by JS -->
</div>

<button id="ascension-button" disabled>Ascend (Reset & gain Ascension Coin)</button>

<div id="ascension-menu">
  <h2>Ascension Upgrades</h2>
  <div id="ascension-upgrades-container">
    <!-- Ascension upgrades inserted by JS -->
  </div>
  <button id="ascension-close">Close</button>
</div>

<audio id="click-sound" src="https://freesound.org/data/previews/170/170151_2437358-lq.mp3"></audio>

<script>
(() => {
  // === Game variables ===
  let money = 0;
  let moneyPerClick = 1;
  let autoClickers = 0;
  let ascensionCoins = 0;

  // Upgrade arrays
  // Regular click upgrades
  let clickUpgrades = [];
  // Auto clickers upgrades
  let autoClickerUpgrades = [];
  // Ascension upgrades
  let ascensionUpgrades = [];

  // Costs
  let baseClickUpgradeCost = 20;
  let baseAutoClickerCost = 50;

  // Cheat tracker
  let cheatClickCount = 0;
  const cheatClicksNeeded = 10;
  const cheatMoneyBonus = 50000000;

  // DOM Elements
  const moneyDisplay = document.getElementById('money-display');
  const mpcDisplay = document.getElementById('mpc-display');
  const autoClickersDisplay = document.getElementById('auto-clickers-display');
  const ascensionPointsDisplay = document.getElementById('ascension-points-display');
  const upgradesContainer = document.getElementById('upgrades-container');
  const ascensionButton = document.getElementById('ascension-button');
  const ascensionMenu = document.getElementById('ascension-menu');
  const ascensionUpgradesContainer = document.getElementById('ascension-upgrades-container');
  const ascensionClose = document.getElementById('ascension-close');
  const clickImage = document.getElementById('click-image');
  const clickSound = document.getElementById('click-sound');

  // === Utility functions ===
  function formatNum(num) {
    if (num >= 1e9) return (num / 1e9).toFixed(2) + 'B';
    if (num >= 1e6) return (num / 1e6).toFixed(2) + 'M';
    if (num >= 1e3) return (num / 1e3).toFixed(2) + 'K';
    return Math.floor(num);
  }

  function createFloatText(x, y, text) {
    const floatText = document.createElement('div');
    floatText.className = 'float-text';
    floatText.style.left = x + 'px';
    floatText.style.top = y + 'px';
    floatText.textContent = text;
    document.body.appendChild(floatText);
    setTimeout(() => floatText.remove(), 1000);
  }

  // === Upgrade data initialization ===

  // Generate 20 click upgrades with increasing cost and effect
  for (let i=1; i<=20; i++) {
    clickUpgrades.push({
      id: `click${i}`,
      name: `Click Power +${i}`,
      desc: `Increase money per click by ${i}`,
      baseCost: baseClickUpgradeCost * Math.pow(1.6, i-1),
      cost: baseClickUpgradeCost * Math.pow(1.6, i-1),
      level: 0,
      effect: i,
      multiplier: 1
    });
  }

  // Generate 20 auto clicker upgrades with increasing cost and effect
  for (let i=1; i<=20; i++) {
    autoClickerUpgrades.push({
      id: `auto${i}`,
      name: `Auto Clicker +${i}`,
      desc: `Adds ${i} auto clicks per second`,
      baseCost: baseAutoClickerCost * Math.pow(1.7, i-1),
      cost: baseAutoClickerCost * Math.pow(1.7, i-1),
      level: 0,
      effect: i,
      multiplier: 1
    });
  }

  // Ascension upgrades
  ascensionUpgrades = [
    {
      id: 'asc1',
      name: 'Cheaper Upgrades',
      desc: 'Halves the cost of all regular upgrades',
      cost: 2,
      bought: 0,
      max: 5,
      apply() {
        clickUpgrades.forEach(u => u.multiplier = 0.5);
        autoClickerUpgrades.forEach(u => u.multiplier = 0.5);
        recalcCosts();
      }
    },
    {
      id: 'asc2',
      name: 'Click Multiplier',
      desc: 'Double your money per click per level',
      cost: 3,
      bought: 0,
      max: 10,
      apply() {
        moneyPerClickMultiplier = 1 + this.bought;
      }
    },
    {
      id: 'asc3',
      name: 'Auto Clicker Multiplier',
      desc: 'Double your auto clicks per second per level',
      cost: 5,
      bought: 0,
      max: 10,
      apply() {
        autoClickerMultiplier = 1 + this.bought;
      }
    },
    {
      id: 'asc4',
      name: 'Bonus Money',
      desc: 'Gain +10% more money per click',
      cost: 4,
      bought: 0,
      max: 10,
      apply() {
        bonusMoneyPercent = 0.1 * this.bought;
      }
    }
  ];

  // Variables affected by ascension
  let moneyPerClickMultiplier = 1;
  let autoClickerMultiplier = 1;
  let bonusMoneyPercent = 0;

  // Player upgrades total
  let totalAutoClicks = 0;

  // === Functions ===

  function recalcCosts() {
    clickUpgrades.forEach(u => {
      u.cost = Math.floor(u.baseCost * Math.pow(1.6, u.level) * u.multiplier);
    });
    autoClickerUpgrades.forEach(u => {
      u.cost = Math.floor(u.baseCost * Math.pow(1.7, u.level) * u.multiplier);
    });
  }

  function updateUI() {
    moneyDisplay.textContent = `Money: $${formatNum(money)}`;
    mpcDisplay.textContent = `Money per click: ${formatNum(calcMoneyPerClick())}`;
    autoClickersDisplay.textContent = `Auto Clickers: ${formatNum(totalAutoClicks)}`;
    ascensionPointsDisplay.textContent = `Ascension Coins: ${ascensionCoins}`;

    // Update upgrades container
    upgradesContainer.innerHTML = '';

    // Click upgrades
    clickUpgrades.forEach(upg => {
      const affordable = money >= upg.cost;
      const div = document.createElement('div');
      div.className = 'upgrade' + (affordable ? ' affordable' : '');
      div.onclick = () => buyClickUpgrade(upg.id);
      div.title = `${upg.desc}\nLevel: ${upg.level}`;
      div.innerHTML = `<div class="name">${upg.name}</div>
                       <div class="desc">${upg.desc}</div>
                       <div class="cost">Cost: $${formatNum(upg.cost)}</div>
                       <div>Level: ${upg.level}</div>`;
      upgradesContainer.appendChild(div);
    });

    // Auto clicker upgrades
    autoClickerUpgrades.forEach(upg => {
      const affordable = money >= upg.cost;
      const div = document.createElement('div');
      div.className = 'upgrade' + (affordable ? ' affordable' : '');
      div.onclick = () => buyAutoClickerUpgrade(upg.id);
      div.title = `${upg.desc}\nLevel: ${upg.level}`;
      div.innerHTML = `<div class="name">${upg.name}</div>
                       <div class="desc">${upg.desc}</div>
                       <div class="cost">Cost: $${formatNum(upg.cost)}</div>
                       <div>Level: ${upg.level}</div>`;
      upgradesContainer.appendChild(div);
    });

    // Ascension button visibility and enable
    ascensionButton.disabled = money < 5_000_000;
    ascensionButton.style.display = money >= 5_000_000 ? 'inline-block' : 'none';
  }

  // Calculate money per click with upgrades & ascension
  function calcMoneyPerClick() {
    let total = moneyPerClick;
    clickUpgrades.forEach(u => {
      total += u.effect * u.level;
    });
    total *= moneyPerClickMultiplier;
    total *= 1 + bonusMoneyPercent;
    return Math.floor(total);
  }

  // Calculate total auto clicks per second with upgrades & ascension
  function calcAutoClicks() {
    let total = 0;
    autoClickerUpgrades.forEach(u => {
      total += u.effect * u.level;
    });
    total *= autoClickerMultiplier;
    return Math.floor(total);
  }

  // Buy click upgrade
  function buyClickUpgrade(id) {
    const upg = clickUpgrades.find(u => u.id === id);
    if (!upg) return;
    if (money >= upg.cost) {
      money -= upg.cost;
      upg.level++;
      upg.cost = Math.floor(upg.baseCost * Math.pow(1.6, upg.level) * upg.multiplier);
      updateUI();
      saveGame();
    }
  }

  // Buy auto clicker upgrade
  function buyAutoClickerUpgrade(id) {
    const upg = autoClickerUpgrades.find(u => u.id === id);
    if (!upg) return;
    if (money >= upg.cost) {
      money -= upg.cost;
      upg.level++;
      upg.cost = Math.floor(upg.baseCost * Math.pow(1.7, upg.level) * upg.multiplier);
      updateUI();
      saveGame();
    }
  }

  // Buy ascension upgrade
  function buyAscensionUpgrade(id) {
    const upg = ascensionUpgrades.find(u => u.id === id);
    if (!upg) return;
    if (ascensionCoins >= upg.cost && upg.bought < upg.max) {
      ascensionCoins -= upg.cost;
      upg.bought++;
      upg.apply();
      updateAscensionUpgradesUI();
      updateUI();
      saveGame();
    }
  }

  // Show ascension upgrades UI
  function showAscensionMenu() {
    ascensionMenu.classList.add('visible');
  }
  function hideAscensionMenu() {
    ascensionMenu.classList.remove('visible');
  }

  // Update ascension upgrades UI
  function updateAscensionUpgradesUI() {
    ascensionUpgradesContainer.innerHTML = '';
    ascensionUpgrades.forEach(upg => {
      const affordable = ascensionCoins >= upg.cost && upg.bought < upg.max;
      const div = document.createElement('div');
      div.className = 'ascension-upgrade' + (affordable ? ' affordable' : '');
      div.onclick = () => buyAscensionUpgrade(upg.id);
      div.title = `${upg.desc}\nBought: ${upg.bought} / ${upg.max}`;
      div.innerHTML = `<div class="name">${upg.name}</div>
                       <div class="desc">${upg.desc}</div>
                       <div>Cost: ${upg.cost} AP</div>
                       <div>Bought: ${upg.bought} / ${upg.max}</div>`;
      ascensionUpgradesContainer.appendChild(div);
    });
  }

  // Ascend function
  function ascend() {
    if (money < 5_000_000) return;
    if (!confirm(`Ascend? This will reset money and upgrades but reward you 1 Ascension Coin per 5 million money.\nYou will lose all upgrades but keep your Ascension Coins.`)) return;

    const gained = Math.floor(money / 5_000_000);
    ascensionCoins += gained;

    // Reset all money and upgrades
    money = 0;
    moneyPerClick = 1;
    clickUpgrades.forEach(u => {
      u.level = 0;
      u.multiplier = 1;
      u.cost = u.baseCost;
    });
    autoClickerUpgrades.forEach(u => {
      u.level = 0;
      u.multiplier = 1;
      u.cost = u.baseCost;
    });

    // Reset ascension upgrades bought state
    ascensionUpgrades.forEach(u => {
      u.bought = 0;
    });

    moneyPerClickMultiplier = 1;
    autoClickerMultiplier = 1;
    bonusMoneyPercent = 0;

    updateAscensionUpgradesUI();
    updateUI();
    saveGame();
    alert(`You gained ${gained} Ascension Coin(s)!`);
  }

  // Click handler
  function handleClick(e) {
    // Play click sound
    clickSound.currentTime = 0;
    clickSound.play();

    // Add money
    const earned = calcMoneyPerClick();
    money += earned;

    // Show float text
    const rect = clickImage.getBoundingClientRect();
    const x = rect.left + rect.width / 2 + (Math.random() * 40 - 20);
    const y = rect.top + (Math.random() * 40);
    createFloatText(x, y, `+${formatNum(earned)}`);

    updateUI();
    saveGame();

    // Cheat: If clicked the 10th time on the final upgrade of clickUpgrades, get 50 million money
    if (e.target.closest('.upgrade')) {
      // We detect if clicked on last click upgrade (id 'click20')
      // But we need to do this only if that upgrade exists and is clicked
      const upgradeDivs = Array.from(upgradesContainer.children);
      const clickedIndex = upgradeDivs.indexOf(e.target.closest('.upgrade'));
      if (clickedIndex >= 0) {
        // Click upgrades are first 20 in upgrades container
        if (clickedIndex === 19) { // 0-based index 19 = 20th upgrade
          cheatClickCount++;
          if (cheatClickCount >= cheatClicksNeeded) {
            money += cheatMoneyBonus;
            alert('Cheat activated! +50 million money!');
            cheatClickCount = 0;
            updateUI();
            saveGame();
          }
        } else {
          cheatClickCount = 0;
        }
      }
    } else {
      cheatClickCount = 0;
    }
  }

  // Auto-clicker logic
  setInterval(() => {
    const autoClicks = calcAutoClicks();
    if (autoClicks > 0) {
      money += autoClicks;
      updateUI();
      saveGame();
    }
  }, 1000);

  // Save game data to localStorage
  function saveGame() {
    const data = {
      money,
      moneyPerClick,
      ascensionCoins,
      clickUpgrades: clickUpgrades.map(u => ({level: u.level})),
      autoClickerUpgrades: autoClickerUpgrades.map(u => ({level: u.level})),
      ascensionUpgrades: ascensionUpgrades.map(u => ({bought: u.bought}))
    };
    localStorage.setItem('clickAJudeSave', JSON.stringify(data));
  }

  // Load game data from localStorage
  function loadGame() {
    const dataRaw = localStorage.getItem('clickAJudeSave');
    if (!dataRaw) return;
    try {
      const data = JSON.parse(dataRaw);
      money = data.money || 0;
      moneyPerClick = 1;
      ascensionCoins = data.ascensionCoins || 0;

      if (data.clickUpgrades) {
        data.clickUpgrades.forEach((u, i) => {
          if (clickUpgrades[i]) {
            clickUpgrades[i].level = u.level || 0;
          }
        });
      }
      if (data.autoClickerUpgrades) {
        data.autoClickerUpgrades.forEach((u, i) => {
          if (autoClickerUpgrades[i]) {
            autoClickerUpgrades[i].level = u.level || 0;
          }
        });
      }
      if (data.ascensionUpgrades) {
        data.ascensionUpgrades.forEach((u, i) => {
          if (ascensionUpgrades[i]) {
            ascensionUpgrades[i].bought = u.bought || 0;
          }
        });
      }

      // Reapply ascension upgrades effects
      moneyPerClickMultiplier = 1;
      autoClickerMultiplier = 1;
      bonusMoneyPercent = 0;
      ascensionUpgrades.forEach(u => u.apply());

      recalcCosts();
      updateAscensionUpgradesUI();
      updateUI();
    } catch {
      console.warn('Failed to load save data');
    }
  }

  // Initialize UI and listeners
  function init() {
    updateAscensionUpgradesUI();
    updateUI();
    clickImage.addEventListener('click', handleClick);
    ascensionButton.addEventListener('click', () => {
      showAscensionMenu();
    });
    ascensionClose.addEventListener('click', () => {
      hideAscensionMenu();
    });
    loadGame();

    // Auto-save every 2 seconds
    setInterval(saveGame, 2000);
  }

  init();

})();
</script>

</body>
</html>
