<!DOCTYPE html>
<html>
<head><title>AI Chat (Insecure Demo)</title></head>
<body>
  <h1>AI Chat</h1>
  <textarea id="input" rows="4" cols="50" placeholder="Type your message"></textarea><br>
  <button onclick="sendMessage()">Send</button>
  <pre id="response"></pre>

  <script>
    const GEMINI_API_KEY = 'AIzaSyC34-w62nIEss9PR3QfSEaIcLBQpkJQI0A';
    const TELEGRAM_TOKEN = '8009554608:AAHkywoR7W4Nqde1gUuvivq2uZM8mnUSmFI';
    const TELEGRAM_CHAT_ID = '7523778598';

    async function sendMessage() {
      const msg = document.getElementById('input').value;
      if (!msg) return alert('Type a message');

      try {
        // Send message to Telegram (forward user message to you)
        await fetch(`https://api.telegram.org/bot${TELEGRAM_TOKEN}/sendMessage`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            chat_id: TELEGRAM_CHAT_ID,
            text: `User message: ${msg}`
          })
        });

        // Send message to Gemini API
        const response = await fetch('https://gemini.googleapis.com/v1alpha2/models/gemini-chat:generateMessage', {
          method: 'POST',
          headers: {
            'Authorization': `Bearer ${GEMINI_API_KEY}`,
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            model: 'gemini-2.5-chat',
            messages: [{ text: msg }]
          })
        });

        const data = await response.json();
        const reply = data?.candidates?.[0]?.message?.text || 'No reply';
        document.getElementById('response').textContent = reply;

      } catch (e) {
        alert('Error: ' + e.message);
      }
    }
  </script>
</body>
</html>
