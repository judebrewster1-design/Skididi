<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Click a Jude - Polished Clicker</title>
<style>
  body {
    background: #121212;
    color: #eee;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    text-align: center;
    margin: 0; padding: 0;
    user-select: none;
  }
  h1 {
    margin: 20px 0 10px;
    font-size: 3rem;
    background: linear-gradient(270deg, red, orange, yellow, green, cyan, blue, violet, red);
    background-size: 1500% 1500%;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    animation: rainbow 5s ease infinite;
  }
  @keyframes rainbow {
    0% {background-position: 0% 50%;}
    50% {background-position: 100% 50%;}
    100% {background-position: 0% 50%;}
  }
  #click-image {
    margin: 10px auto 20px;
    width: 150px;
    height: 150px;
    cursor: pointer;
    user-select: none;
    border-radius: 15px;
    box-shadow: 0 0 8px #0ff;
    transition: transform 0.15s ease;
  }
  #click-image:active {
    transform: scale(0.9);
  }
  #money-display {
    font-size: 2rem;
    margin-bottom: 8px;
  }
  #mpc-display, #auto-clickers-display, #ascension-points-display {
    margin: 4px 0;
    font-weight: bold;
  }
  #upgrades-section, #auto-clickers-section, #ascension-section {
    max-width: 750px;
    margin: 20px auto;
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 14px;
  }
  .upgrade {
    background: #222;
    border-radius: 8px;
    border: 2px solid #444;
    width: 180px;
    padding: 12px;
    box-sizing: border-box;
    cursor: pointer;
    color: #aaa;
    transition: border-color 0.3s, box-shadow 0.3s, color 0.3s;
  }
  .upgrade.affordable {
    border-color: #0ff;
    box-shadow: 0 0 12px #0ff;
    color: #0ff;
  }
  .upgrade:hover {
    border-color: #0ff;
  }
  .upgrade .name {
    font-weight: 700;
    font-size: 1.1rem;
    margin-bottom: 6px;
  }
  .upgrade .desc {
    font-size: 0.85rem;
    min-height: 40px;
    margin-bottom: 8px;
  }
  .upgrade .cost {
    font-weight: 700;
    font-size: 1rem;
  }
  #ascension-button {
    margin-top: 30px;
    padding: 14px 28px;
    font-size: 1.2rem;
    cursor: pointer;
    background: #007acc;
    border: none;
    border-radius: 10px;
    color: white;
    box-shadow: 0 0 12px #007accaa;
    transition: background 0.3s ease;
  }
  #ascension-button:disabled {
    background: #555;
    cursor: default;
    box-shadow: none;
  }
  #ascension-coins-display {
    margin-top: 10px;
    font-weight: bold;
    font-size: 1.3rem;
    color: #0ff;
    text-shadow: 0 0 6px #0ff;
  }
  #ascension-menu {
    position: fixed;
    top: 10%;
    left: 50%;
    transform: translateX(-50%);
    background: #101010ee;
    border-radius: 16px;
    padding: 25px;
    width: 90%;
    max-width: 500px;
    box-shadow: 0 0 25px #00ffaaee;
    display: none;
    flex-direction: column;
    z-index: 1000;
    color: #0ff;
  }
  #ascension-menu.visible {
    display: flex;
  }
  #ascension-menu h2 {
    margin: 0 0 18px 0;
  }
  .ascension-upgrade {
    background: #222;
    border-radius: 8px;
    border: 2px solid #004d40;
    margin-bottom: 14px;
    padding: 14px 10px;
    cursor: pointer;
    color: #066;
    transition: border-color 0.3s ease, color 0.3s ease;
  }
  .ascension-upgrade.affordable {
    border-color: #0ff;
    color: #0ff;
    box-shadow: 0 0 10px #0ff;
  }
  .ascension-upgrade:hover {
    border-color: #0ff;
  }
  .ascension-upgrade .name {
    font-weight: 700;
    font-size: 1.1rem;
  }
  .ascension-upgrade .desc {
    font-size: 0.9rem;
    margin: 6px 0 0 0;
  }
  #ascension-close {
    margin-top: 10px;
    align-self: flex-end;
    background: #007acc;
    border: none;
    padding: 8px 18px;
    border-radius: 8px;
    color: white;
    cursor: pointer;
    box-shadow: 0 0 8px #007accaa;
  }
  #ascension-close:hover {
    background: #005fa3;
  }
  /* Floating click text */
  .float-text {
    position: absolute;
    font-weight: 900;
    color: #0ff;
    text-shadow: 0 0 12px #0ff;
    user-select: none;
    pointer-events: none;
    animation: floatUp 1s forwards ease-out;
  }
  @keyframes floatUp {
    0% {opacity: 1; transform: translateY(0);}
    100% {opacity: 0; transform: translateY(-50px);}
  }
</style>
</head>
<body>

<h1>Click a Jude</h1>
<img id="click-image" src="IMG_7281.jpeg" alt="Click a Jude" draggable="false" />

<div id="money-display">Money: $0</div>
<div id="mpc-display">Money per click: 1</div>
<div id="auto-clickers-display">Auto Clickers: 0</div>
<div id="ascension-points-display">Ascension Coins: 0</div>

<h2>Click Upgrades</h2>
<div id="upgrades-section"></div>

<h2>Auto Clicker Upgrades</h2>
<div id="auto-clickers-section"></div>

<button id="ascension-button" disabled>Ascend (Reset & gain Ascension Coins)</button>

<div id="ascension-menu">
  <h2>Ascension Upgrades</h2>
  <div id="ascension-upgrades-container"></div>
  <button id="ascension-close">Close</button>
</div>

<audio id="click-sound" src="https://freesound.org/data/previews/170/170151_2437358-lq.mp3"></audio>

<script>
(() => {
  let money = 0;
  let baseMoneyPerClick = 1;
  let ascensionCoins = 0;

  // Cheat variables
  let cheatClickCount = 0;
  const cheatClicksNeeded = 10;
  const cheatBonus = 50000000;

  // Upgrade containers
  const clickUpgrades = [];
  const autoClickerUpgrades = [];
  const ascensionUpgrades = [];

  // Ascension multipliers
  let moneyPerClickMultiplier = 1;
  let autoClickerMultiplier = 1;
  let costMultiplier = 1;
  let bonusMoneyPercent = 0;

  // DOM
  const moneyDisplay = document.getElementById('money-display');
  const mpcDisplay = document.getElementById('mpc-display');
  const autoClickersDisplay = document.getElementById('auto-clickers-display');
  const ascensionPointsDisplay = document.getElementById('ascension-points-display');
  const upgradesSection = document.getElementById('upgrades-section');
  const autoClickersSection = document.getElementById('auto-clickers-section');
  const ascensionButton = document.getElementById('ascension-button');
  const ascensionMenu = document.getElementById('ascension-menu');
  const ascensionUpgradesContainer = document.getElementById('ascension-upgrades-container');
  const ascensionClose = document.getElementById('ascension-close');
  const clickImage = document.getElementById('click-image');
  const clickSound = document.getElementById('click-sound');

  // Format numbers with suffixes
  function formatNum(n) {
    if (n >= 1e9) return (n/1e9).toFixed(2) + 'B';
    if (n >= 1e6) return (n/1e6).toFixed(2) + 'M';
    if (n >= 1e3) return (n/1e3).toFixed(2) + 'K';
    return Math.floor(n);
  }

  // Create floating text effect
  function createFloatText(x, y, text) {
    const el = document.createElement('div');
    el.className = 'float-text';
    el.style.left = x + 'px';
    el.style.top = y + 'px';
    el.textContent = text;
    document.body.appendChild(el);
    setTimeout(() => el.remove(), 1000);
  }

  // Initialize upgrades
  function initUpgrades() {
    // Click upgrades (20)
    for (let i=1; i<=20; i++) {
      clickUpgrades.push({
        id: `click${i}`,
        name: `Click Power +${i}`,
        desc: `Increase money per click by ${i}`,
        baseCost: 20 * Math.pow(1.6, i-1),
        cost: 20 * Math.pow(1.6, i-1),
        level: 0,
        effect: i
      });
    }
    // Auto clickers (20)
    for (let i=1; i<=20; i++) {
      autoClickerUpgrades.push({
        id: `auto${i}`,
        name: `Auto Clicker +${i}`,
        desc: `Adds ${i} auto clicks per second`,
        baseCost: 50 * Math.pow(1.7, i-1),
        cost: 50 * Math.pow(1.7, i-1),
        level: 0,
        effect: i
      });
    }
    // Ascension upgrades
    ascensionUpgrades.push({
      id: 'asc1',
      name: 'Cheaper Upgrades',
      desc: 'Halve the cost of all regular upgrades',
      cost: 2,
      maxLevel: 5,
      level: 0,
      apply() {
        costMultiplier = 0.5;
        updateAllCosts();
      }
    });
    ascensionUpgrades.push({
      id: 'asc2',
      name: 'Click Multiplier',
      desc: 'Double your money per click per level',
      cost: 3,
      maxLevel: 10,
      level: 0,
      apply() {
        moneyPerClickMultiplier = 1 + this.level;
      }
    });
    ascensionUpgrades.push({
      id: 'asc3',
      name: 'Auto Clicker Multiplier',
      desc: 'Double your auto clicks per second per level',
      cost: 5,
      maxLevel: 10,
      level: 0,
      apply() {
        autoClickerMultiplier = 1 + this.level;
      }
    });
    ascensionUpgrades.push({
      id: 'asc4',
      name: 'Bonus Money',
      desc: 'Gain +10% more money per click per level',
      cost: 4,
      maxLevel: 10,
      level: 0,
      apply() {
        bonusMoneyPercent = 0.1 * this.level;
      }
    });
  }

  // Update costs for all upgrades
  function updateAllCosts() {
    clickUpgrades.forEach(u => {
      u.cost = Math.floor(u.baseCost * Math.pow(1.6, u.level) * costMultiplier);
    });
    autoClickerUpgrades.forEach(u => {
      u.cost = Math.floor(u.baseCost * Math.pow(1.7, u.level) * costMultiplier);
    });
  }

  // Calculate money per click
  function calcMoneyPerClick() {
    let base = baseMoneyPerClick;
    clickUpgrades.forEach(u => {
      base += u.effect * u.level;
    });
    base *= moneyPerClickMultiplier;
    base = Math.floor(base * (1 + bonusMoneyPercent));
    return base;
  }

  // Calculate auto clicks per second
  function calcAutoClicks() {
    let total = 0;
    autoClickerUpgrades.forEach(u => {
      total += u.effect * u.level;
    });
    total *= autoClickerMultiplier;
    return Math.floor(total);
  }

  // Create upgrade elements in DOM
  function createUpgradeElements() {
    upgradesSection.innerHTML = '';
    clickUpgrades.forEach(u => {
      const div = document.createElement('div');
      div.className = 'upgrade';
      div.id = u.id;
      div.innerHTML = `
        <div class="name">${u.name}</div>
        <div class="desc">${u.desc}</div>
        <div class="cost">Cost: $${formatNum(u.cost)}</div>
        <div>Level: ${u.level}</div>
      `;
      upgradesSection.appendChild(div);
      div.addEventListener('click', () => buyClickUpgrade(u));
    });

    autoClickersSection.innerHTML = '';
    autoClickerUpgrades.forEach(u => {
      const div = document.createElement('div');
      div.className = 'upgrade';
      div.id = u.id;
      div.innerHTML = `
        <div class="name">${u.name}</div>
        <div class="desc">${u.desc}</div>
        <div class="cost">Cost: $${formatNum(u.cost)}</div>
        <div>Level: ${u.level}</div>
      `;
      autoClickersSection.appendChild(div);
      div.addEventListener('click', () => buyAutoClickerUpgrade(u));
    });
  }

  // Create ascension upgrade elements in menu
  function createAscensionUpgradeElements() {
    ascensionUpgradesContainer.innerHTML = '';
    ascensionUpgrades.forEach(u => {
      const div = document.createElement('div');
      div.className = 'ascension-upgrade';
      if (u.level < u.maxLevel && ascensionCoins >= u.cost) {
        div.classList.add('affordable');
      }
      div.id = u.id;
      div.innerHTML = `
        <div class="name">${u.name} (Level ${u.level}/${u.maxLevel})</div>
        <div class="desc">${u.desc}</div>
        <div>Cost: ${u.cost} Ascension Coins</div>
      `;
      ascensionUpgradesContainer.appendChild(div);
      div.addEventListener('click', () => buyAscensionUpgrade(u));
    });
  }

  // Buy functions
  function buyClickUpgrade(u) {
    if (money >= u.cost) {
      money -= u.cost;
      u.level++;
      updateAllCosts();
      updateUI();
      createUpgradeElements();
      saveGame();
      cheatClickCount = 0;
    }
  }
  function buyAutoClickerUpgrade(u) {
    if (money >= u.cost) {
      money -= u.cost;
      u.level++;
      updateAllCosts();
      updateUI();
      createUpgradeElements();
      saveGame();
    }
  }
  function buyAscensionUpgrade(u) {
    if (ascensionCoins >= u.cost && u.level < u.maxLevel) {
      ascensionCoins -= u.cost;
      u.level++;
      u.apply();
      updateUI();
      createAscensionUpgradeElements();
      saveGame();
    }
  }

  // Show / hide ascension menu
  function showAscensionMenu() {
    ascensionMenu.classList.add('visible');
  }
  function hideAscensionMenu() {
    ascensionMenu.classList.remove('visible');
  }

  // Update main UI
  function updateUI() {
    moneyDisplay.textContent = `Money: $${formatNum(money)}`;
    const mpc = calcMoneyPerClick();
    mpcDisplay.textContent = `Money per click: ${formatNum(mpc)}`;
    const autoClicks = calcAutoClicks();
    autoClickersDisplay.textContent = `Auto Clickers: ${formatNum(autoClicks)}`;
    ascensionPointsDisplay.textContent = `Ascension Coins: ${ascensionCoins}`;

    // Enable ascension button only if money >= 5 million
    ascensionButton.disabled = money < 5_000_000;

    // Glow affordable upgrades
    clickUpgrades.forEach(u => {
      const el = document.getElementById(u.id);
      if (!el) return;
      if (money >= u.cost) el.classList.add('affordable');
      else el.classList.remove('affordable');
      el.querySelector('div:last-child').textContent = `Level: ${u.level}`;
      el.querySelector('.cost').textContent = `Cost: $${formatNum(u.cost)}`;
    });
    autoClickerUpgrades.forEach(u => {
      const el = document.getElementById(u.id);
      if (!el) return;
      if (money >= u.cost) el.classList.add('affordable');
      else el.classList.remove('affordable');
      el.querySelector('div:last-child').textContent = `Level: ${u.level}`;
      el.querySelector('.cost').textContent = `Cost: $${formatNum(u.cost)}`;
    });

    // Ascension upgrades glow
    ascensionUpgrades.forEach(u => {
      const el = document.getElementById(u.id);
      if (!el) return;
      if (ascensionCoins >= u.cost && u.level < u.maxLevel) el.classList.add('affordable');
      else el.classList.remove('affordable');
      el.querySelector('.name').textContent = `${u.name} (Level ${u.level}/${u.maxLevel})`;
    });
  }

  // Ascension logic
  function ascend() {
    if (money < 5_000_000) {
      alert("You need at least $5,000,000 to ascend!");
      return;
    }
    if (!confirm(
      `Ascension will reset all money and upgrades but give you 1 Ascension Coin per 5 million money.\nYou will lose all upgrades but keep your Ascension Coins.\n\nConfirm ascend?`
    )) return;

    const gained = Math.floor(money / 5_000_000);
    ascensionCoins += gained;

    // Reset money & upgrades
    money = 0;
    baseMoneyPerClick = 1;

    clickUpgrades.forEach(u => {
      u.level = 0;
      u.cost = u.baseCost * Math.pow(1.6, u.level) * costMultiplier;
    });
    autoClickerUpgrades.forEach(u => {
      u.level = 0;
      u.cost = u.baseCost * Math.pow(1.7, u.level) * costMultiplier;
    });
    ascensionUpgrades.forEach(u => {
      u.level = 0;
    });

    // Reset multipliers and recalc costs
    moneyPerClickMultiplier = 1;
    autoClickerMultiplier = 1;
    costMultiplier = 1;
    bonusMoneyPercent = 0;

    updateAllCosts();
    updateUI();
    createUpgradeElements();
    createAscensionUpgradeElements();
    saveGame();

    alert(`You gained ${gained} Ascension Coin(s)!`);
    hideAscensionMenu();
  }

  // Handle clicks on main image
  function handleClick(e) {
    // Play click sound
    clickSound.currentTime = 0;
    clickSound.play();

    const earned = calcMoneyPerClick();
    money += earned;

    // Show floating text near image
    const rect = clickImage.getBoundingClientRect();
    const x = rect.left + rect.width/2 + (Math.random()*40-20);
    const y = rect.top + (Math.random()*40);
    createFloatText(x, y, `+$${formatNum(earned)}`);

    updateUI();
    saveGame();

    // Cheat detection for final click upgrade
    if (e.target.closest('.upgrade')) {
      const upgradesEls = Array.from(upgradesSection.children);
      const clickedIndex = upgradesEls.indexOf(e.target.closest('.upgrade'));
      if (clickedIndex === 19) { // 20th upgrade index
        cheatClickCount++;
        if (cheatClickCount >= cheatClicksNeeded) {
          money += cheatBonus;
          alert("Cheat activated! +50 million money!");
          cheatClickCount = 0;
          updateUI();
          saveGame();
        }
      } else {
        cheatClickCount = 0;
      }
    } else {
      cheatClickCount = 0;
    }
  }

  // Auto clicker interval
  setInterval(() => {
    const autoClicks = calcAutoClicks();
    if (autoClicks > 0) {
      money += autoClicks;
      updateUI();
      saveGame();
    }
  }, 1000);

  // Save/load game
  function saveGame() {
    const saveData = {
      money,
      baseMoneyPerClick,
      ascensionCoins,
      clickUpgrades: clickUpgrades.map(u => ({level: u.level})),
      autoClickerUpgrades: autoClickerUpgrades.map(u => ({level: u.level})),
      ascensionUpgrades: ascensionUpgrades.map(u => ({level: u.level})),
      moneyPerClickMultiplier,
      autoClickerMultiplier,
      costMultiplier,
      bonusMoneyPercent
    };
    localStorage.setItem('clickAJudeSave', JSON.stringify(saveData));
  }

  function loadGame() {
    const dataRaw = localStorage.getItem('clickAJudeSave');
    if (!dataRaw) return;
    try {
      const data = JSON.parse(dataRaw);
      money = data.money || 0;
      baseMoneyPerClick = data.baseMoneyPerClick || 1;
      ascensionCoins = data.ascensionCoins || 0;

      if (data.clickUpgrades) {
        data.clickUpgrades.forEach((u, i) => {
          if (clickUpgrades[i]) clickUpgrades[i].level = u.level || 0;
        });
      }
      if (data.autoClickerUpgrades) {
        data.autoClickerUpgrades.forEach((u, i) => {
          if (autoClickerUpgrades[i]) autoClickerUpgrades[i].level = u.level || 0;
        });
      }
      if (data.ascensionUpgrades) {
        data.ascensionUpgrades.forEach((u, i) => {
          if (ascensionUpgrades[i]) ascensionUpgrades[i].level = u.level || 0;
        });
      }

      moneyPerClickMultiplier = data.moneyPerClickMultiplier || 1;
      autoClickerMultiplier = data.autoClickerMultiplier || 1;
      costMultiplier = data.costMultiplier || 1;
      bonusMoneyPercent = data.bonusMoneyPercent || 0;

      updateAllCosts();
      updateUI();
      createUpgradeElements();
      createAscensionUpgradeElements();
    } catch (e) {
      console.warn("Failed to load save:", e);
    }
  }

  // Init
  function init() {
    initUpgrades();
    createUpgradeElements();
    createAscensionUpgradeElements();
    loadGame();

    clickImage.addEventListener('click', handleClick);
    ascensionButton.addEventListener('click', ascend);
    ascensionClose.addEventListener('click', hideAscensionMenu);

    // Auto save every 2 seconds
    setInterval(saveGame, 2000);
  }

  init();

})();
</script>

</body>
</html>
